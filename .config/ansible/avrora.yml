- name: Setup "cascadia" Laptop
  hosts: localhost
  become: false
  become_method: ansible.builtin.sudo

  roles:
    - backup
    - paru

  tasks:
    - name: Packages
      become: true
      ansible.builtin.package:
        name:
          - git
          - alacritty
          - neovim
          - bash-completion
          - unzip
          - rsync
          - rustup
          - nvm
          - fzf
          - fx # process json
          - git-delta # does file diffs
          - jq
          - tokei # count lines of code
          - kubectl
          - k9s
          - gnu-netcat
          - eza # ls drop-in
          # Desktop/ricing
          - brightnessctl
          - hyprpaper
          - hyprlock
          - hypridle
          - waybar
          - gnome-keyring
          - wofi
          - eog
          - bluez
          - discord

    # TODO install from AUR: python-pywal

    - name: discord | Add Ozone Flags
      become: true
      ansible.builtin.lineinfile:
        path: /opt/discord/discord.desktop
        regexp: '^Exec=/usr/bin/discord'
        line: 'Exec=/usr/bin/discord --enable-features=UseOzonePlatform --ozone-platform=wayland'
        #validate: desktop-file-validate %s
        owner: root
        group: root

