#################################\
# | |__   __ _ _ __ _ __ _   _    \
# | '_ \ / _` | '__| '__| | | |    \
# | | | | (_| | |  | |  | |_| |     \
# |_| |_|\__,_|_|  |_|   \__, |      \
#                        |___/        \
#######################################\
# github: https://github.com/harrybrwn
# website: http://harrybrwn.com

export VISUAL=vim
export EDITOR="$VISUAL"

# Enable colors for less and man pages
export LESS="--RAW-CONTROL-CHARS"
[ -f ~/.LESS_TERMCAP ] && . ~/.LESS_TERMCAP

[ -f "$HOME/.local/profile.d/paths.sh" ] && . "$HOME/.local/profile.d/paths.sh"
[ -f "$HOME/.local/profile.d/vars.sh" ] && . "$HOME/.local/profile.d/vars.sh"

# If not running interactively, don't do anything
[[ $- != *i* ]] && return

alias ls='ls -hN --color=auto --group-directories-first'
alias l="ls -lAh"
alias la="ls -A"
alias g=git
alias rr='curl -s -L https://raw.githubusercontent.com/keroserene/rickrollrc/master/roll.sh | bash'
alias fsizes='du -sh $(ls -A) | sort -hr'
alias dots='git --git-dir=$HOME/.config/dots --work-tree=$HOME'
alias grep='grep --color=auto --exclude-dir={.bzr,CVS,.git,.hg,.svn} --directories=skip'

# alias wifi="nmcli --colors yes device wifi list"
alias wifi=wavemon
alias settings='gnome-control-center'
alias paths='sed "s/:/\n/g" <<< "$PATH"'
alias open='xdg-open'
alias say="espeak"
alias copy="xclip -i"
alias paste="xclip -o"
alias aspdf='libreoffice --headless --invisible --convert-to pdf'
alias htmltopdf='wkhtmltopdf'
alias githistory='gource -a 1 -c 4.0 -f .'
alias wget='wget --hsts-file ~/.config/wget/wget-hsts'
alias screenrec='sh ~/tools/screencast.sh'

if [ -d ~/.local/share/applications ]; then
    alias notes="bash <(grep -Po '(?<=Exec=).*' $(grep -l 'Keep' ~/.local/share/applications/*))"
else
    alias notes='echo "google keep not installed"'
fi

function mkdircd() {
    mkdir $1 && cd $1
}

net() {
    # lspci -vv -s $(lspci | grep -i wireless | awk '{print $1}')
    # iwconfig $(iw dev | awk '/Interface /{print $2}')
    watch -n1 --color nmcli --colors yes device wifi list
}

google() {
	local q="$*"

	if [ -z "$q" ]; then
		x-www-browser "https://www.google.com"
	else
        local query=""
        for w in $(echo "$q"); do
            if [ -n "$query" ]; then
                query="$query+$w"
            else
                query="$w"
            fi
        done
		x-www-browser "https://www.google.com/search?q=$query"
	fi
}

lines() {
	find . -name "$1" | xargs wc -l | sort -k 1n
    # (find . -name "$1" -print '%p ' | xargs -0 cat) | wc -l
}

function show-colors() {
    for i in {0..255} ; do
        printf "\x1b[38;5;${i}mcolour${i} "
    done
    echo ''
}

[ `hostname` != 'harry-yogo920' ] && return # only run tmux on my machine

if command -v tmux > /dev/null && [ -z "$TMUX" ]; then
    if tmux ls > /dev/null 2>&1; then
        if [ $(tmux display -p '#{session_attached}') -eq 0 ]; then
            tmux attach -t $(tmux ls -F '#{session_name}' | head -n 1)
        fi
    else
        tmux new -d -s misc -c ~/
    fi
fi
