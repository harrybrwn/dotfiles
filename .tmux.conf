# cat << EOF > /dev/null

# Set prefix to ctrl-f
set -g prefix C-f
unbind C-b

# Plugin for saving current sessions (ctrl-s and ctrl-r)
run-shell ~/tools/tmux-resurrect/resurrect.tmux

set -g default-terminal 'xterm-256color'

# Vim-like keybindings
bind-key v split-window -h
bind-key s split-window -v
bind-key h select-pane -L
bind-key j select-pane -D
bind-key k select-pane -U
bind-key l select-pane -R

bind '"' split-window -v -c "#{pane_current_path}"
bind '%' split-window -h -c "#{pane_current_path}"
bind r source-file ~/.tmux.conf
bind s set -g status


BG=default
dull=colour247
important=colour255
SEP="#[fg=magenta]▕▏#[fg=default]"
tmuxconf='~/.config/tmux'
cpu_status="#[fg=#{dull}]cpu: #[fg=#{important}]#(#{tmuxconf}/cpu.py) #(#{tmuxconf}/temp.sh)"
wifi_status='#[fg=#{dull}]#(#{tmuxconf}/wifi.sh -a)'
mem_status="#[fg=#{dull}]mem: #[fg=#{important}]#(#{tmuxconf}/mem.sh -h)"
battery='#(#{tmuxconf}/bat.sh)'

status_date='#[bg=#{BG},fg=#{dull}]%b %d, %Y'
status_time='#[fg=#{important}]%l:%M %P#[bg=default]'

if_width_lt_110="#(test ! #{window_width} -lt 110; echo $?)"

set -g pane-active-border-style fg=magenta

# Status Bar config
set -g status-interval 10
set -g status-justify left
set -g status-right-length 110
set -g status-left-length 50
set -g status-position bottom
set -g status-bg $BG
set -g message-fg "$dull"
set -g message-bg default
set -g status-left "#[bg=magenta,fg=colour0]#{?client_prefix,#[bg=colour250]#[italics] #S ,[#S]}#[bg=$BG,fg=colour12] "
setw -g window-status-format '#[bg=colour0,fg=$dull]#[fg=colour7] #W '
setw -g window-status-current-format '#[bg=colour239,fg=colour251,nobold,italics] #W '

set -g  status-right "#{?$if_width_lt_110,,"
                        # do nothing
                    # else
set -ag status-right    "$cpu_status #{SEP} $mem_status #{SEP} $wifi_status #{SEP} "
set -ag status-right "}" # endif
set -ag status-right "$status_date $status_time $battery"

# run 'cut -c3- ~/.tmux.conf | sh -s apply'

# EOF
#
# set -e
#
# apply() {
#   tmux set -g status on
# }
#
# "$@"
